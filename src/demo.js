const alien_archive_1 = {
    "$schema": "pdf_schema.json",
    "name": "alien_archives_1",
    "title": "PZO7105E.pdf",
    "author": "Copyright 2017 Paizo Inc.",
    "creation_date": "D:20170808175333-07'-00'",
    "assets": {
        "alien_archives": {
            "Aeon Guard": {
                "id": "WZvgJseACvlCNqrT",
                "orig": "img_p7_7",
                "icon": "img_p8_9"
            },
            "Aeon Guard Specialist": {
                "id": "g8RVg32DwUoYvkWe",
                "orig": "img_p7_7",
                "icon": "img_p8_9"
            },
            "Ahav": {
                "id": "FTn1x9aRTBNAq5Kq",
                "orig": "img_p9_2",
                "icon": "img_p10_4"
            },
            "Anacite Laborer": {
                "id": "QdINalLf6rRRL8OS",
                "orig": "img_p11_3",
                "icon": "img_p12_2"
            },
            "Anacite Wingbot": {
                "id": "oCTQI68v9Alt2pfP",
                "orig": "img_p12_1"
            },
            "Barachius": {
                "id": "tdFDm4Hw5sdtjPId",
                "orig": "img_p13_1",
                "icon": "img_p14_2"
            },
            "Apari": {
                "id": "mpchkkvbiKHoLdto",
                "orig": "img_p15_1",
                "icon": "img_p16_1"
            },
            "Apari Constituent": {
                "id": "ijWFbXqDk7sqKN5T",
                "orig": "img_p16_3"
            },
            "Assembly Ooze": {
                "id": "zjktKO2wLiLrAsyY",
                "orig": "img_p17_1",
                "icon": "img_p18_1"
            },
            "Asteray": {
                "id": "Ntsjeawqk6QzSlOE",
                "orig": "img_p19_2",
                "icon": "img_p20_1",
                "additional": [
                    "img_p20_2"
                ]
            },
            "Barathu": {
                "id": "tM35G3YiwebUP7qb",
                "orig": "img_p22_3"
            },
            "Barathu (Early Stage)": {
                "id": "hxQsdQUyjDEFHO0i",
                "orig": "img_p21_1",
                "icon": "img_p22_1"
            },
            "Bloodbrother": {
                "id": "MjO5gIWQAbjsVCGp",
                "orig": "img_p23_1",
                "icon": "img_p24_1"
            },
            "Bryrvath": {
                "id": "7FZHTF7AnSiRmgVO",
                "orig": "img_p25_2",
                "icon": "img_p26_1"
            },
            "Caypin": {
                "id": "Nk06Qs43IKHAKz3H",
                "orig": "img_p27_1",
                "icon": "img_p28_1",
                "additional": [
                    "img_p20_2"
                ]
            },
            "Contemplative": {
                "id": "UDM8QKhEOIUnaEj7",
                "orig": "img_p29_1",
                "icon": "img_p30_1"
            },
            "Contemplative Mentor": {
                "id": "t6h5sj3nM7OVRfaM",
                "orig": "img_p30_3"
            },
            "Crest-Eater": {
                "id": "PaKThmRGLYWWX2bC",
                "orig": "img_p31_1",
                "icon": "img_p32_1"
            },
            "Deh-Nolo": {
                "id": "4l9FGozKp56cDILa",
                "orig": "img_p33_1",
                "icon": "img_p34_1",
                "additional": [
                    "img_p34_3"
                ]
            },
            "Devil, Endbringer Devil (Dhalochar)": {
                "id": "NGfNlBJ8MUjkwDFB",
                "orig": "img_p35_1",
                "icon": "img_p36_2"
            },
            "Draelik": {
                "id": "RIprzWBQsM77aJqB",
                "orig": "img_p37_2",
                "icon": "img_p38_1"
            },
            "Dragon (Chromatic), Young Adult Blue Dragon": {
                "id": "bIMg9b9x1df3xrc5",
                "orig": "img_p39_1",
                "icon": "img_p40_1"
            },
            "Dragonkin": {
                "id": "EWYDjeqj2wKrSlRf",
                "orig": "img_p41_1",
                "icon": "img_p42_1",
                "additional": [
                    "img_p42_3"
                ]
            },
            "Drow, Drow Enforcer": {
                "id": "IDdI8ud0W2H6Zwtq",
                "orig": "img_p43_1",
                "icon": "img_p44_4"
            },
            "Drow, Drow Noble Arms Dealer": {
                "id": "vd2ir0oiOm468fHd",
                "orig": "img_p44_5"
            },
            "Electrovore": {
                "id": "7RvBrqrxj0lU8HDn",
                "orig": "img_p45_1",
                "icon": "img_p46_3"
            },
            "Elemental, Tiny Elemental": {
                "id": "1wFa1VLmqsIRYzts",
                "orig": "img_p47_3",
                "icon": "img_p48_3"
            },
            "Elemental, Medium Elemental": {
                "id": "y49fGxezprkoqPCX",
                "orig": "img_p48_2"
            },
            "Ellicoth": {
                "id": "cOnSbV6DtFw0cMVZ",
                "orig": "img_p49_1",
                "icon": "img_p50_2"
            },
            "Formian Worker": {
                "id": "jDiSlxkeRmHB7KVl",
                "orig": "img_p52_3",
                "icon": "img_p52_1"
            },
            "Formian Warrior": {
                "id": "Zo1eabjvHjbxKLhV",
                "orig": "img_p51_1"
            },
            "Frujai Colony": {
                "id": "D1yOmDSe3AvfgmeT",
                "orig": "img_p53_1",
                "icon": "img_p54_1"
            },
            "Frujai Soldier": {
                "id": "QKApkamFbqDOvlFw",
                "orig": "img_p54_2"
            },
            "Goblin Zaperator, Space": {
                "id": "rYqcQSfW9JNZvrgu",
                "orig": "img_p55_1",
                "icon": "img_p56_1",
                "additional": [
                    "img_p56_3"
                ]
            },
            "Goblin Honchohead, Space": {
                "id": "o2yiClN2r7hePI1r",
                "orig": "img_p55_1",
                "icon": "img_p56_1"
            },
            "Gray": {
                "id": "iGyssnNyuKkLUoe3",
                "orig": "img_p57_1",
                "icon": "img_p58_1"
            },
            "Haan": {
                "id": "JGy9KPW4TDCVGVRm",
                "orig": "img_p59_1",
                "icon": "img_p60_1"
            },
            "Haan Combat Pilot": {
                "id": "ATVLMtL1ytPHWA5Q",
                "orig": "img_p60_3"
            },
            "Hallajin": {
                "id": "5VTsS5lNTvOi9Qm1",
                "orig": "img_p61_1",
                "icon": "img_p62_2",
                "additional": [
                    "img_p62_3"
                ]
            },
            "Hesper": {
                "id": "LxY10hWgykJ1mHPR",
                "orig": "img_p63_1",
                "icon": "img_p64_1",
                "additional": [
                    "img_p64_2"
                ]
            },
            "Ikeshti Brood-Minder": {
                "id": "qorX15hHEV5fnEmR",
                "orig": "img_p65_1",
                "icon": "img_p66_1"
            },
            "Ikeshti Rivener": {
                "id": "pbG9jF39GJMJNAVI",
                "orig": "img_p66_3"
            },
            "Inevitable, Anhamut": {
                "id": "ZKgodvTA0JrdvAw2",
                "orig": "img_p67_1",
                "icon": "img_p68_1",
                "additional": [
                    "img_p68_3"
                ]
            },
            "Kalo Sharkhunter": {
                "id": "lYX7TqpyqYGuEseQ",
                "orig": "img_p70_3",
                "icon": "img_p70_1"
            },
            "Kalo Deepspeaker": {
                "id": "o8ROezUgr2CPYuse",
                "orig": "img_p69_1"
            },
            "Ksarik": {
                "id": "cotdeRcSwXSWmRnz",
                "orig": "img_p71_1",
                "icon": "img_p72_1"
            },
            "Kyokor": {
                "id": "OskZ4ZdcAm3Mky2k",
                "orig": "img_p73_1",
                "icon": "img_p74_1"
            },
            "Maraquoi Hunter": {
                "id": "nwBkawW3ovzllcw8",
                "orig": "img_p75_1",
                "icon": "img_p76_2"
            },
            "Maraquoi Shaman": {
                "id": "z1UoKhNtCSHMdYH6",
                "orig": "img_p76_3"
            },
            "Marooned One": {
                "id": "9oyzluBAgOQVTkdU",
                "orig": "img_p77_2",
                "icon": "img_p78_1",
                "additional": [
                    "img_p78_3"
                ]
            },
            "Mountain Eel": {
                "id": "Mr6efnQ3BwDjRXd6",
                "orig": "img_p79_1",
                "icon": "img_p80_2",
                "additional": [
                    "img_p80_1"
                ]
            },
            "Necrovite": {
                "id": "ljSw5nhGM96SAqpw",
                "orig": "img_p81_1",
                "icon": "img_p82_1"
            },
            "Nihili": {
                "id": "1HX0TcrpW7wsPHG1",
                "orig": "img_p83_1",
                "icon": "img_p84_1"
            },
            "Nihili Captain": {
                "id": "J5pekj8xf6gFexm8",
                "orig": "img_p83_1",
                "icon": "img_p84_1"
            },
            "Nuar Enforcer": {
                "id": "K9j2qI3vSHyBDTaw",
                "orig": "img_p87_1",
                "icon": "img_p88_2",
                "additional": [
                    "img_p88_3"
                ]
            },
            "Nuar Specialist": {
                "id": "VAP4WgYWhIVjrZ95",
                "orig": "img_p87_1",
                "icon": "img_p88_2",
                "additional": [
                    "img_p88_3"
                ]
            },
            "Oma": {
                "id": "UJdN6AgYHWhq7o7S",
                "orig": "img_p89_3",
                "icon": "img_p90_3"
            },
            "Orocoran": {
                "id": "qf76Avpdu38Ogwf9",
                "orig": "img_p91_1",
                "icon": "img_p92_1"
            },
            "Orocoran Ichor Lord": {
                "id": "68Zh2g0gInpBEmdh",
                "orig": "img_p92_2"
            },
            "Reptoid": {
                "id": "4qnbAsjt5tYVJ3PQ",
                "orig": "img_p94_3"
            },
            "Reptoid Master": {
                "id": "ObcDKO4FCjAq6CrG",
                "orig": "img_p93_1",
                "icon": "img_p94_2"
            },
            "Robot (Security), Patrol-Class": {
                "id": "DWUaxunk0vwLCmQ8",
                "orig": "img_p96_3"
            },
            "Robot (Security), Observer-Class": {
                "id": "oqthkU2Ix5TLLWHt",
                "orig": "img_p95_1",
                "icon": "img_p96_1"
            },
            "Ryphorian Technician": {
                "id": "dip7t11VYLzcu19k",
                "orig": "img_p97_1",
                "icon": "img_p98_2"
            },
            "Ryphorian Skyfire Pilot": {
                "id": "XFBxFNz0W1LT7ONr",
                "orig": "img_p98_3"
            },
            "Sarcesian Sniper": {
                "id": "eaFja8SMFehmeRWK",
                "orig": "img_p99_1",
                "icon": "img_p100_1"
            },
            "Sarcesian Cybercommando": {
                "id": "hPoSxp2DVmtBqdag",
                "orig": "img_p99_1",
                "icon": "img_p100_1"
            },
            "Scavenger Slime": {
                "id": "J93HimYHpTa3qFVu",
                "orig": "img_p101_1",
                "icon": "img_p102_1"
            },
            "Sharpwing": {
                "id": "R1B6IJ7A9PKWRbfM",
                "orig": "img_p103_1",
                "icon": "img_p104_1"
            },
            "Shobhad": {
                "id": "WBwkX9oEraWtEQzs",
                "orig": "img_p105_1",
                "icon": "img_p106_2"
            },
            "Shobhad Warleader": {
                "id": "YgIEtjj2hEErVfwL",
                "orig": "img_p106_3"
            },
            "Skittermander Whelp": {
                "id": "xir7197v8MgibmU9",
                "orig": "img_p107_1"
            },
            "Skittermander": {
                "id": "p1G9Jk04tqB4cI1X",
                "orig": "img_p108_3",
                "icon": "img_p108_2"
            },
            "Surnoch": {
                "id": "pdmOr9NEQHgYJDFK",
                "orig": "img_p109_1",
                "icon": "img_p110_2"
            },
            "The Swarm, Corrovox": {
                "id": "2qbiJSmMCDVdaRrR",
                "orig": "img_p111_1",
                "icon": "img_p112_1"
            },
            "The Swarm, Thresher Lord": {
                "id": "SEPRMVRjQlBTGdnj",
                "orig": "img_p112_2"
            },
            "Symbiend": {
                "id": "CO2YirHMuhfZgEDK",
                "orig": "img_p113_1",
                "icon": "img_p114_1"
            },
            "Damoritosh's Arm Host": {
                "id": "LP6hXmgEC0WG94K9",
                "orig": "img_p114_2"
            },
            "Undead Minion, Cybernetic Zombie": {
                "id": "Lm6T2ReFaBXLoXbB",
                "orig": "img_p115_1",
                "icon": "img_p116_1"
            },
            "Urog": {
                "id": "JbEglOaLQboHa0TG",
                "orig": "img_p117_1",
                "icon": "img_p118_2",
                "additional": [
                    "img_p118_3"
                ]
            },
            "Verthani Aether Pilot": {
                "id": "oYtsrRPplxH4Zl34",
                "orig": "img_p120_3"
            },
            "Verthani Pure One": {
                "id": "vHkWZbvEzuJRnJGp",
                "orig": "img_p119_1",
                "icon": "img_p120_2"
            },
            "Void Hag": {
                "id": "jqjSEiKtCg5rZwuP",
                "orig": "img_p121_1",
                "icon": "img_p122_1",
                "additional": [
                    "img_p122_2"
                ]
            },
            "Witchwyrd": {
                "id": "DxpOpmviBiLLNN2U",
                "orig": "img_p123_1",
                "icon": "img_p124_2"
            },
            "Wrikreechee": {
                "id": "lrnpQylZEgTvDZqE",
                "orig": "img_p125_1",
                "icon": "img_p126_2",
                "additional": [
                    "img_p126_3"
                ]
            }
        },
        "archetype_features": {},
        "archetypes": {},
        "equipment": {
            "Barachius helm": {
                "id": "zhwtcYRlSM1bCvkk",
                "orig": "img_p13_1"
            },
            "Bloodbrother serum": {
                "id": "igzMXZrMGVeXVcLl",
                "orig": "img_p24_2"
            },
            "Aura goggles": {
                "id": "aY5SzYd5RW0feC9X",
                "orig": "img_p26_3"
            },
            "Bone cestus, measured": {
                "id": "EiIXu4PUYfHQMtzq",
                "orig": "img_p32_2"
            },
            "Shadowstaff, Standard (ranged)": {
                "id": "bo4Zjh3U33RkLVqZ",
                "orig": "img_p38_2"
            },
            "Lesser Shadowstaff (ranged)": {
                "id": "98FOgPPDdLainh1A",
                "orig": "img_p38_2"
            },
            "Electrovore glove, tempest": {
                "id": "9Pc6ENEnpZU2s0No",
                "orig": "img_p46_4"
            },
            "Adaptive serum, Mk 1": {
                "id": "1sS9DH3TBSnI6TQQ",
                "orig": "img_p72_2"
            },
            "Adaptive serum, Mk 2": {
                "id": "ZC2SF1K3DCnGKAMy",
                "orig": "img_p72_2"
            },
            "Adaptive serum, Mk 3": {
                "id": "8gYz7Fujm9xb2ANW",
                "orig": "img_p72_2"
            },
            "Kyokor plating I": {
                "id": "BwOYoxphrQWz1el3",
                "orig": "img_p74_2"
            },
            "Kyokor plating II": {
                "id": "pGK9e40KS7PYrM62",
                "orig": "img_p74_2"
            },
            "Kyokor plating III": {
                "id": "SGOqDqiroXGLzkm6",
                "orig": "img_p74_2"
            },
            "Kyokor plating IV": {
                "id": "VWWXOfwuP8nT9kB0",
                "orig": "img_p74_2"
            },
            "Kyokor plating V": {
                "id": "4tMbnx3q5pENCj8l",
                "orig": "img_p74_2"
            },
            "Eoxian Wrackstaff": {
                "id": "ecCdoxwqOvfNp6Am",
                "orig": "img_p82_2"
            },
            "Diasporan rifle, advanced": {
                "id": "2nWb4IAYcbW8mOth",
                "orig": "img_p100_3"
            },
            "Diasporan rifle, ultra": {
                "id": "8re7PxUQQ7eBQVgS",
                "orig": "img_p100_3"
            },
            "Diasporan rifle, tactical": {
                "id": "r65YZS2ZmQvGSAPJ",
                "orig": "img_p100_3"
            },
            "Diasporan rifle, elite": {
                "id": "yN9wOQPIOelIrbvP",
                "orig": "img_p100_3"
            },
            "Diasporan rifle, imperial": {
                "id": "z5cRUOkx9pdhHKeo",
                "orig": "img_p100_3"
            },
            "Ocucloak processor": {
                "id": "zWtsejTYzWNU0TCF",
                "orig": "img_p104_2"
            },
            "Acid lancer, melter-class": {
                "id": "TaKCOSKUR2gCJgf2",
                "orig": "img_p110_1"
            },
            "Acid lancer, corroder-class": {
                "id": "py6EBDtgKQnZMsVl",
                "orig": "img_p110_1"
            },
            "Acid lancer, disintegrator-class": {
                "id": "tRFj98ItL181cFhO",
                "orig": "img_p110_1"
            },
            "Acid lancer, liquefier-class": {
                "id": "zZwrA4SusXXoAYRu",
                "orig": "img_p110_1"
            }
        },
        "starship_components": {
            "Oma": {
                "id": "11iDFArwuDhvzFxI",
                "orig": "img_p90_2"
            }
        },
        "starships": {
            "Endbringer Devil": {
                "id": "kayep1LyosKKAaIH",
                "orig": "img_p36_1"
            },
            "Novaspawn": {
                "id": "AH3k7fEglnjueg0M",
                "orig": "img_p85_1",
                "icon": "img_p86_2",
                "additional": [
                    "img_p86_1"
                ]
            }
        }
    }
};

Hooks.on("ready", async function () {
    console.log(" 8888888b.                                                                     888          ")
    console.log(" 888  \"Y88b                                                                    888          ")
    console.log(" 888    888                                                                    888          ")
    console.log(" 888    888  .d88b.  88888b.d88b.   .d88b.       888d888 .d88b.   8888b.   .d88888 888  888 ")
    console.log(" 888    888 d8P  Y8b 888 \"888 \"88b d88\"\"88b      888P\"  d8P  Y8b     \"88b d88\" 888 888  888 ")
    console.log(" 888    888 88888888 888  888  888 888  888      888    88888888 .d888888 888  888 888  888 ")
    console.log(" 888  .d88P Y8b.     888  888  888 Y88..88P      888    Y8b.     888  888 Y88b 888 Y88b 888 ")
    console.log(" 8888888P\"   \"Y8888  888  888  888  \"Y88P\"       888     \"Y8888  \"Y888888  \"Y88888  \"Y88888 ")
    console.log("                                                                                        888 ")
    console.log("                                                                                   Y8b d88P ")
    console.log("                                                                                    \"Y88P\"  ")


    const re1 = /[ ]/gi;
    const re2 = /[\W]/gi;
    const re3 = /[_]/gi;
    const defaultDir = 'pdftocompendium/sfrpg/alien_archives_1/alien_archives';
    // const actorImgPath = 'modules/demo-module/aeon-guard.actor.png';
    // const actorTokenPath = 'modules/demo-module/aeon-guard.token.png';
    // const npcId = "WZvgJseACvlCNqrT"; // Aeon Guard
    const packName = 'alien-archives';
    const pack = game.packs.get(`sfrpg.${packName}`);

    const archive = alien_archive_1.assets.alien_archives
    Object.entries(archive).forEach( async ([npc_name, npc_val]) => {
        const actor_file = `${defaultDir}/${npc_name.toLocaleLowerCase().replace(re1, '_').replace(re2, '').replace(re3, '-')}.actor.png`;
        const token_file = `${defaultDir}/${npc_name.toLocaleLowerCase().replace(re1, '_').replace(re2, '').replace(re3, '-')}.token.png`;
        let actor = await pack.getDocument(npc_val.id);

        if (!actor.canUserModify(game.user, "update")) {
            return;
        }
        // // For whatever reason the order here matters
        actor.prototypeToken.texture.src = token_file;
        // actor.img = actor_file;
        actor.update({"prototypeToken.texture.src":token_file});
        actor.update({"img": actor_file});
    });

    // const data = {
    //     "test": "t1"
    // }
    // const newFile = new File([JSON.stringify(data)], 'test.json', { type: "application.json"});
    // await FilePicker.upload("data", "testfolder", newFile, {});

    // let actor = await pack.getDocument(npcId);


    // x = actor.prototypeToken //.texture.src// = actorTokenPath;
    // console.log(x);
});